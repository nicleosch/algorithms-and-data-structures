//---------------------------------------------------------------------------
// #######
// # AnD #
// #######
//---------------------------------------------------------------------------
#ifndef UTILS_H_
#define UTILS_H_
//---------------------------------------------------------------------------
#include <cstdint>
//---------------------------------------------------------------------------
/**
 *  MurmurHash64A implementation by Prof. Dr. Viktor Leis
 */
static constexpr uint64_t mm_hash(uint64_t k) {
    const uint64_t m = 0xc6a4a7935bd1e995;
    const int r = 47;
    uint64_t h = 0x8445d61a4e774912 ^ (8 * m);
    k *= m;
    k ^= k >> r;
    k *= m;
    h ^= k;
    h *= m;
    h ^= h >> r;
    h *= m;
    h ^= h >> r;
    return h;
}
//---------------------------------------------------------------------------
/**
 *  Bithack from:
 *  https://graphics.stanford.edu/~seander/bithacks.html#RoundUpPowerOf2
 */
static constexpr uint64_t next_power_of_2(uint64_t v) {
    v--;
    v |= v >> 1;
    v |= v >> 2;
    v |= v >> 4;
    v |= v >> 8;
    v |= v >> 16;
    v |= v >> 32;
    v++;
    return v;
}
//---------------------------------------------------------------------------
#endif // UTILS_H_
//---------------------------------------------------------------------------